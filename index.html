<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Java simulation of Charles Babbage's Analytical Engine.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Analytical Engine</title>

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400%7CLibre+Baskerville" rel="stylesheet">
  <link rel="stylesheet" href="css/analyticalengine.css">
</head>
<body>
  <div class="container">
    <header>
      <p>Charles&nbsp;Babbage&rsquo;s
      <h1>Analytical Engine</h1>
      <p>A Java Simulation
    </header>

    <p>C<b>harles&nbsp;Bab&shy;bage de&shy;signed</b> (but nev&shy;er built) a
    com&shy;put&shy;ing ma&shy;chine in the mid-1800s, a ma&shy;chine that
    to&shy;day would be called a dig&shy;i&shy;tal com&shy;put&shy;er. On this
    ma&shy;chine mod&shy;el, Ada&nbsp;Lovelace de&shy;signed the first
    com&shy;put&shy;er pro&shy;gram. Babbage&rsquo;s ini&shy;tial
    de&shy;scrip&shy;tions of the ma&shy;chine pre&shy;date Alan&nbsp;Turing's
    mod&shy;el of a gen&shy;er&shy;al pur&shy;pose com&shy;put&shy;er by about
    a hun&shy;dred years. This Java sim&shy;u&shy;la&shy;tion of the
    An&shy;a&shy;lyt&shy;i&shy;cal En&shy;gine will help to pre&shy;serve the
    lega&shy;cy of these pi&shy;o&shy;neers of com&shy;put&shy;ing.

    <nav>
      <h2>Contents</h2>
      <ul>
        <li><a href="#hardware">Hardware overview</a></li>
        <li><a href="#preparing">Preparing the simulator</a></li>
        <li><a href="#programming">Programming the Engine</a></li>
        <li><a href="#programmatic-access">Programmatic access to the simulator</a></li>
        <li><a href="#copyright">Copyright license</a></li>
      </ul>
    </nav>

    <section id="hardware">
      <h2>Hardware overview</h2>

      <aside>
        <p>For more in&shy;for&shy;ma&shy;tion on the
        ter&shy;mi&shy;nol&shy;o&shy;gy,
        see <a href="http://www.fourmilab.ch/babbage/glossary.html">this
        glos&shy;sary</a>.
      </aside>

      <p>The An&shy;a&shy;lyt&shy;i&shy;cal En&shy;gine ma&shy;chin&shy;ery is
      es&shy;sen&shy;tial&shy;ly the same as that of a (sim&shy;ple) mod&shy;ern
      dig&shy;i&shy;tal com&shy;put&shy;er. Here is a brief
      de&shy;scrip&shy;tion of the hard&shy;ware in&shy;clud&shy;ing both
      the old and new ter&shy;mi&shy;nolo&shy;gies.

      <p>Each in&shy;struc&shy;tion for the ma&shy;chine comes on
      a <dfn>card</dfn> with holes punched in it to in&shy;di&shy;cate which
      in&shy;struc&shy;tion it rep&shy;re&shy;sents (that is, its
      &ldquo;op&shy;code&rdquo;). A pro&shy;gram is pro&shy;vid&shy;ed as a
      se&shy;quence of card&shy;s.

      <p>The ran&shy;dom ac&shy;cess mem&shy;o&shy;ry of the ma&shy;chine is
      called the <dfn>&shy;s&shy;tore</dfn> and the arith&shy;metic log&shy;ic
      unit is called the <dfn>mil&shy;l</dfn>. The mill per&shy;forms
      arith&shy;metic op&shy;er&shy;a&shy;tions on in&shy;te&shy;gers, each of
      which is stored in a reg&shy;is&shy;ter called an <dfn>ax&shy;is</dfn>
      (plur&shy;al <dfn>ax&shy;es</dfn>). In&shy;te&shy;gers read from
      mem&shy;o&shy;ry are stored in <dfn>ingress ax&shy;es</dfn> and the
      re&shy;sult of arith&shy;metic op&shy;er&shy;a&shy;tions are stored
      in <dfn>egress ax&shy;es</dfn>. The <dfn>run-up lev&shy;er</dfn> is a
      flag that is set when an arith&shy;metic op&shy;er&shy;a&shy;tion
      caus&shy;es an in&shy;te&shy;ger over&shy;flow.

      <p>The ma&shy;chine is con&shy;trolled by
      an <dfn>at&shy;ten&shy;dan&shy;t</dfn> who loads pro&shy;gram&shy;s,
      starts and op&shy;er&shy;ates the ma&shy;chine while the pro&shy;gram
      ex&shy;e&shy;cutes, and pro&shy;vides a fi&shy;nal re&shy;port
      show&shy;ing the out&shy;put of the ma&shy;chine. The ma&shy;chine can
      pro&shy;duce tex&shy;tu&shy;al out&shy;put via a print&shy;er as well as
      graph&shy;i&shy;cal out&shy;put via a <dfn>curve draw&shy;ing
      ap&shy;pa&shy;ra&shy;tus</dfn>, a de&shy;vice we would call a
      plot&shy;ter.
    </section>

    <section id="preparing">
      <h2>Preparing the simulator</h2>

      <p>The source code for the An&shy;a&shy;lyt&shy;i&shy;cal En&shy;gine
      sim&shy;u&shy;la&shy;tor is avail&shy;able
      from <a href="//github.com/jfinkels/analyticalengine">GitHub</a>.

      <pre class="command-line"><span class="command">git clone https://github.com/jfinkels/analyticalengine</span></pre>

      <p>This project uses <a href="//maven.apache.org/">Maven</a> for build
      man&shy;age&shy;ment and re&shy;quires Java 1.8 to com&shy;pile.

      <p>To cre&shy;ate a shell script that runs the sim&shy;u&shy;la&shy;tor,
      run

      <pre class="command-line"><span class="command">mvn package appassembler:assemble</span></pre>

      <p>This pro&shy;duces a script that ex&shy;e&shy;cutes the
      sim&shy;u&shy;la&shy;tor
      at <code>target/appassembler/bin/analyticalengine</code>. An
      An&shy;a&shy;lyt&shy;i&shy;cal En&shy;gine pro&shy;gram stored in a file
      named <code>myprogram.ae</code>, for ex&shy;am&shy;ple, can then be
      ex&shy;e&shy;cut&shy;ed via

      <pre class="command-line"><span class="command">target/appassembler/bin/analyticalengine myprogram.ae</span></pre>
    </section>

    <section id="programming">
      <h2>Programming the Engine</h2>

      <aside>
        <p>For more in&shy;for&shy;ma&shy;tion on the in&shy;struc&shy;tion set
        and how to write pro&shy;grams for this ma&shy;chine, see the
        <a href="http://www.fourmilab.ch/babbage/cards.html">card
        ref&shy;er&shy;ence</a>.
      </aside>

      <p>The pro&shy;gram&shy;ming lan&shy;guage for this ma&shy;chine is
      ar&shy;cane, but rel&shy;a&shy;tive&shy;ly sim&shy;i&shy;lar to
      mod&shy;ern ma&shy;chine lan&shy;guages. For the pur&shy;pos&shy;es of
      this sim&shy;u&shy;la&shy;tor, an An&shy;a&shy;lyt&shy;i&shy;cal
      En&shy;gine pro&shy;gram is a text file in which each line
      rep&shy;re&shy;sents a card.

      <p>To load a num&shy;ber into the store, use the <code>N</code> card.

      <div class="example">
        <h3>Example</h3>
        <p>Store the num&shy;ber 123 in mem&shy;o&shy;ry lo&shy;ca&shy;tion 1.
        <pre class="ae-code"><span class="card">N1 123</span></pre>
      </div>

      <p>Blank lines, lines be&shy;gin&shy;ning with a pe&shy;ri&shy;od, and
      lines be&shy;gin&shy;ning with&shy;spaces are treat&shy;ed as
      com&shy;ment card&shy;s.
      <!-- A period after another instruction indicates a comment. -->

      <div class="example">
        <h3>Example</h3>
        <p>In this ex&shy;am&shy;ple there are five com&shy;ment card&shy;s,
        three of which are blank.
        <pre>
<span class="comment">   This program loads two numbers into the store.</span>
<span class="card"></span>
<span class="card">N1 123</span>
<span class="card"></span>
<span class="comment">. This is another comment.</span>
<span class="card"></span>
<span class="card">N2 456</span>
</pre>
      </div>

      <p>Arith&shy;metic op&shy;er&shy;a&shy;tions are
      au&shy;to&shy;mat&shy;i&shy;cal&shy;ly ex&shy;e&shy;cut&shy;ed once the
      two operands are loaded from mem&shy;o&shy;ry into the ingress
      ax&shy;es. The re&shy;sult of the op&shy;er&shy;a&shy;tion is
      au&shy;to&shy;mat&shy;i&shy;cal&shy;ly ex&shy;tract&shy;ed from the
      egress axis and stored in a mem&shy;o&shy;ry lo&shy;ca&shy;tion
      in&shy;di&shy;cat&shy;ed by a store card.

      <div class="example">
        <h3>Example</h3>
        <p>Add two num&shy;bers from mem&shy;o&shy;ry lo&shy;ca&shy;tions 1 and
        2 and store the re&shy;sult in mem&shy;o&shy;ry lo&shy;ca&shy;tion 3.

        <pre>
<span class="card">N1 123</span>
<span class="card">N2 456</span>
<span class="comment"></span>
<span class="card">+</span>
<span class="card">L1</span>
<span class="card">L2</span>
<span class="card">S3</span></pre>
      </div>

      <p>Di&shy;vi&shy;sion can be per&shy;formed on a div&shy;i&shy;dend of
      &ldquo;dou&shy;ble width&rdquo; by load&shy;ing the low&shy;er-order
      dig&shy;its of the div&shy;i&shy;dend in the first main ingress axis and
      the high&shy;er-order dig&shy;its of the div&shy;i&shy;dend into the
      &ldquo;prime&rdquo; ingress ax&shy;is. The prime axis must be loaded
      af&shy;ter the main ax&shy;is.

      <p>The quo&shy;tient of a di&shy;vi&shy;sion can be ac&shy;cessed from
      the prime egress ax&shy;is, and the re&shy;main&shy;der from the main
      egress ax&shy;is. If the quo&shy;tient is too large for the main
      ax&shy;is, the run-up lever is set, and the quo&shy;tient and
      re&shy;main&shy;der will be set to 0.

      <div class="example">
        <h3>Example</h3>
        <p>Com&shy;pute 10<sup>50</sup> + 1 di&shy;vid&shy;ed by two. By
        de&shy;fault, each axis can store a dec&shy;i&shy;mal num&shy;ber of
        fifty dig&shy;it&shy;s, so load&shy;ing 1 into the low&shy;er
        or&shy;der ingress axis and an&shy;oth&shy;er 1 into the prime ingress
        axis rep&shy;re&shy;sents 10<sup>50</sup> + 1.

        <pre>
<span class="card">N1 1</span>
<span class="card">N2 1</span>
<span class="card">N3 2</span>
<span class="card"></span>
<span class="card">/</span>
<span class="card">L2</span>
<span class="card">L1'</span>
<span class="card">L3</span>
<span class="card"></span>
<span class="comment">  Print the quotient.</span>
<span class="card"></span>
<span class="card">S3'</span>
<span class="card">P</span>
<span class="card"></span>
<span class="comment">  Print the remainder.</span>
<span class="card"></span>
<span class="card">S4</span>
<span class="card">P</span></pre>
      </div>

      <p>Per&shy;form&shy;ing the same op&shy;er&shy;a&shy;tion twice does not
      re&shy;quire re-spec&shy;i&shy;fy&shy;ing the op&shy;er&shy;a&shy;tion.

      <div class="example">
        <h3>Example</h3>
        <p>Mul&shy;ti&shy;ply two by two, and then mul&shy;ti&shy;ply that
        prod&shy;uct by two. Store the re&shy;sult in mem&shy;o&shy;ry
        ad&shy;dress 1.
        <pre>
<span class="card">N1 2</span>
<span class="card">N2 2</span>
<span class="card"></span>
<span class="card">*</span>
<span class="card">L1</span>
<span class="card">L2</span>
<span class="card">S1</span>
<span class="card">L1</span>
<span class="card">L2</span>
<span class="card">S1</span></pre>
      </div>

      <p>Num&shy;bers can be print&shy;ed to the print&shy;er by us&shy;ing
      the <code>P</code> card. To re&shy;main his&shy;tor&shy;i&shy;cal&shy;ly
      ac&shy;cu&shy;rate, the sim&shy;u&shy;la&shy;tor does not print
      di&shy;rect&shy;ly to stan&shy;dard out&shy;put when it
      en&shy;coun&shy;ters a print card; in&shy;stead, the at&shy;ten&shy;dant
      col&shy;lects all print&shy;ed strings and makes them avail&shy;able only
      af&shy;ter the pro&shy;gram has ter&shy;mi&shy;nat&shy;ed.

      <div class="example">
        <h3>Example</h3>
        <p>Print the sum of 123 and 456 to the print&shy;er.
        <pre>
<span class="card">N1 123</span>
<span class="card">N2 456</span>
<span class="card"></span>
<span class="card">+</span>
<span class="card">L1</span>
<span class="card">L2</span>
<span class="card">S3</span>
<span class="card">P</span></pre>
      </div>

      <p>What gives this ma&shy;chine its com&shy;pu&shy;ta&shy;tion&shy;al
      pow&shy;er is con&shy;di&shy;tion&shy;al ex&shy;e&shy;cu&shy;tion. A
      con&shy;di&shy;tion&shy;al jump card checks whether the run-up lever has
      been set and ei&shy;ther re&shy;vers&shy;es or ad&shy;vances the card
      chain by a spec&shy;i&shy;fied num&shy;ber of card&shy;s.

      <div class="example">
        <h3>Example</h3>
        <p>In this ex&shy;am&shy;ple, the En&shy;gine com&shy;putes a
        fac&shy;to&shy;r&shy;i&shy;al by ac&shy;cu&shy;mu&shy;lat&shy;ing the
        prod&shy;uct of <em>n</em> with (<em>n</em> - 1)!
        it&shy;er&shy;a&shy;tive&shy;ly. At the end of each
        it&shy;er&shy;a&shy;tion, the con&shy;di&shy;tion&shy;al jump card
        de&shy;cides whether to per&shy;form an&shy;oth&shy;er
        it&shy;er&shy;a&shy;tion of the loop or to ter&shy;mi&shy;nate and
        print the re&shy;sult based on whether the run-up lever has been set.

        <pre>
<span class="comment">  Computes 6! using a loop.</span>
<span class="card"></span>
<span class="comment">  Address 0 is the current value of n.</span>
<span class="comment">  Address 1 is the accumulator for the product.</span>
<span class="comment">  Address 2 represents the constant 1.</span>
<span class="card"></span>
<span class="card">N0 6</span>
<span class="card">N1 1</span>
<span class="card">N2 1</span>
<span class="card"></span>
<span class="card">*</span>
<span class="card">L1</span>
<span class="card">L0</span>
<span class="card">S1</span>
<span class="card">-</span>
<span class="card">L0</span>
<span class="card">L2</span>
<span class="card">S0</span>
<span class="comment">   If 1 - n &lt; 0, go back 12 cards (including this one!)</span>
<span class="card">L2</span>
<span class="card">L0</span>
<span class="card">CB?12</span>
<span class="card">L1</span>
<span class="card">P</span></pre>
      </div>
    </section>

    <section id="programmatic-access">
      <h2>Programmatic access to the simulator</h2>

      <p>The sim&shy;u&shy;la&shy;tor per&shy;forms the fol&shy;low&shy;ing
      high&shy;-lev&shy;el al&shy;go&shy;rithm

      <ol>
        <li>pre&shy;pare a card chain,</li>
        <li>ask the at&shy;ten&shy;dant to load the card chain,</li>
        <li>run the En&shy;gine.</li>
      </ol>

      <p>The Attendant in&shy;ter&shy;face and
      the <code>AnalyticalEngine</code> in&shy;ter&shy;face are the most
      sig&shy;nif&shy;i&shy;cant parts of the sim&shy;u&shy;la&shy;tor
      in&shy;ter&shy;face. Once a card chain is pre&shy;pared, the
      at&shy;ten&shy;dant loads the cards into the En&shy;gine us&shy;ing the
      <code>Attendant.loadProgram()</code> method. Once the cards are
      load&shy;ed, call&shy;ing the <code>AnalyticalEngine.run()</code> method
      ex&shy;e&shy;cutes the pro&shy;gram. Any out&shy;put is
      col&shy;lect&shy;ed by the at&shy;ten&shy;dant and can be ac&shy;cessed
      via the <code>Attendant.finalReport()</code> method.

      <p>The <code>&shy;An&shy;a&shy;lyt&shy;i&shy;calEngine</code> must be
      pro&shy;gram&shy;mat&shy;i&shy;cal&shy;ly as&shy;sem&shy;bled be&shy;fore
      it can ex&shy;e&shy;cute a pro&shy;gram. The En&shy;gine needs a
      mil&shy;l, a store, a card read&shy;er, etc., each of which can be set
      us&shy;ing the ap&shy;pro&shy;pri&shy;ate&shy;ly named set&shy;ter
      meth&shy;od&shy;s. The code is de&shy;signed so that each
      com&shy;po&shy;nent can be eas&shy;i&shy;ly reim&shy;ple&shy;ment&shy;ed
      and re&shy;placed.

      <div class="example">
        <h3>Example</h3>
        <p>One might re&shy;place the de&shy;fault <code>HashMap</code>-based
        im&shy;ple&shy;men&shy;ta&shy;tion of <code>&shy;S&shy;tore</code> with
        one backed by a re&shy;mote key-&shy;val&shy;ue data store:

        <pre class="java-code">package mycoolpackage;

import analyticalengine.components.Store;
import ???.redis.???;
import java.math.BigInteger;

public class RedisStore implements Store {
    public BigInteger get(long address) {
        return redis.get(address);
    }

    public BigInteger put(long address, BigInteger value) {
        redis.put(address, value);
    }

    public void reset() {
        redis.clear();
    }
}
</pre>

        <p>This new store can then be set on an <code>AnalyticalEngine</code>
        in&shy;stance <code>engine</code> via <code>engine.setStore(new
        RedisStor())</code>.
      </div>

    </section>

    <section id="copyright">
      <h2>Copyright license</h2>

      <p>Copy&shy;right 2014&ndash;2016 Jeffrey&nbsp;Finkelstein.

      <p>The code is dis&shy;trib&shy;uted un&shy;der the terms of
      the <abbr>GNU</abbr> Gen&shy;er&shy;al Pub&shy;lic Li&shy;cense
      ver&shy;sion 3. It is de&shy;rived from
      the <a href="//www.fourmilab.ch/babbage/contents.html">orig&shy;i&shy;nal
      code</a> by John&nbsp;Walker, which
      was <a href="//www.fourmilab.ch/babbage/cmdline.html">ded&shy;i&shy;cat&shy;ed
      to the pub&shy;lic do&shy;main</a>.

      <p>This doc&shy;u&shy;ment is dis&shy;trib&shy;uted un&shy;der the terms
      of the <a rel="license"
      href="http://creativecommons.org/licenses/by-sa/4.0/">Cre&shy;ative
      Com&shy;mons At&shy;tri&shy;bu&shy;tion-Share&shy;Alike 4.0
      In&shy;ter&shy;na&shy;tion&shy;al li&shy;cense</a>.

    </section>

  </div>
</body>
</html>
